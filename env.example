# ====================================
# RAG Intelligent Q&A System - Environment Configuration Example
# ====================================
# Usage: Copy this file to .env and fill in actual configuration values
#
# LLM API Configuration (SiliconFlow)
SILICONFLOW_API_KEY=your_api_key_here

# Main LLM Model (for final answer generation)
SILICONFLOW_MODEL_ID=deepseek-ai/DeepSeek-R1-Distill-Qwen-7B

# Query Enhancement Model (for keyword generation)
# Recommended to use a lightweight non-reasoning model for speed and no thinking process
QUERY_ENHANCEMENT_MODEL_ID=Qwen/Qwen2.5-7B-Instruct

SILICONFLOW_API_URL=https://api.siliconflow.cn/v1/chat/completions

# Rerank API Configuration
SILICONFLOW_RERANK_URL=https://api.siliconflow.cn/v1/rerank
SILICONFLOW_RERANK_MODEL=BAAI/bge-reranker-v2-m3

# Local Embedding Model Path (Please modify to your actual path)
LOCAL_EMBEDDING_MODEL_PATH=./models/acge_text_embedding

# ==================== PDF Conversion Configuration (MinerU) ====================
# Enable GPU acceleration for PDF conversion (True/False)
PDF_USE_GPU=True

# GPU device ID to use for PDF conversion (default: 0)
PDF_GPU_ID=0

# Application Configuration
APP_HOST=0.0.0.0
APP_PORT=8000
APP_RELOAD=True

# Logging Configuration
# Log Levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
# DEBUG mode shows detailed parent Hash and full content info, useful for debugging search accuracy
LOG_LEVEL=INFO

# ==================== Retrieval Parameters ====================
RETRIEVAL_COUNT=10      # Initial recall document count
RERANK_TOP_K=3         # Number of documents to keep after reranking

# Rerank Relevance Threshold (Strongly recommended > 0.30)
# - 0.30 (30%): Recommended, filters out obviously irrelevant results
# - 0.50 (50%): Strict mode, only keeps highly relevant results
# - 0.01 (1%): Too loose, not recommended
RERANK_THRESHOLD=0.30

# ==================== Vector Search Thresholds (Rough Sort Stage) ====================
# Precision Mode: Low threshold (20%), because of Rerank secondary filtering, looser recall allows more candidates
VECTOR_SEARCH_THRESHOLD_WITH_RERANK=0.20

# Fast Mode: High threshold (50%), because no secondary filtering, quality must be guaranteed
# Suggestion: 0.50-0.60, results below this will be filtered directly
VECTOR_SEARCH_THRESHOLD_WITHOUT_RERANK=0.50

# Legacy configuration (Used only if both above are not set)
# VECTOR_SEARCH_THRESHOLD=0.20
# SIMILARITY_THRESHOLD=0.55

# Query Enhancement Parameters (HyDE Technology)
# Original question weight, range 0-1, Keyword weight = 1 - this value
# Recommended: 0.6 (Original question 60%, Generated keywords 40%)
QUERY_ENHANCEMENT_WEIGHT=0.6

# LLM Parameters
LLM_TEMPERATURE=0

# ==================== Redis Cache Configuration ====================
REDIS_HOST=localhost          # Redis Server Address
REDIS_PORT=6379               # Redis Port
REDIS_PASSWORD=               # Redis Password (leave empty if none)
REDIS_DB=0                    # Redis Database Number

# Semantic Cache Thresholds
CACHE_THRESHOLD_DIRECT=0.98   # Similarity >= this returns cache directly (no user confirmation)
CACHE_THRESHOLD_CONFIRM=0.95  # Similarity >= this prompts user to confirm cache usage

# Cache Settings
CACHE_TTL=3600                # Cache Expiration (seconds), default 1 hour
CACHE_MAX_SIZE=1000           # Max Cache Entries, LRU eviction when exceeded

# ==================== Admin Configuration ====================
# Admin Username
ADMIN_USERNAME=admin

# Admin Password SHA256 Hash
# Generation method: python -c "import hashlib; print(hashlib.sha256('your_password'.encode()).hexdigest())"
# Default password: hash for 'admin123'
ADMIN_PASSWORD_HASH=240be518fabd2724ddb6f04eeb1da5967448d7e831c08c8fa822809f74c720a9

# Admin Token Expiration (seconds), default 1 hour
ADMIN_TOKEN_EXPIRE=3600
